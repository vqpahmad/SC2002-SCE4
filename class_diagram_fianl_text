@startuml class_diagram_final
title Internship Management System - Class Diagram

left to right direction
skinparam linetype ortho

' ==== SPACING CONTROLS ====
skinparam nodesep 300      ' horizontal space
skinparam ranksep 150      ' vertical space
skinparam classAttributeIconSize 0
skinparam shadowing false

skinparam class {
    Padding 20
}


hide empty methods
hide empty fields

' ====== YELLOW NOTES (SAFE VERSION) ======

' Abstraction / inheritance for User
note "Abstraction and inheritance:\nUser is an abstract base class that defines\ncommon properties and behaviors.\nStudent, CompanyRepresentative and\nCareerCenterStaff inherit from it." as N1
User .. N1

' Encapsulation for CompanyRepresentative
note "Encapsulation:\ncreatedInternships and isApproved are kept\nprivate and modified only through\ngetter and setter methods." as N2
CompanyRepresentative .. N2

' Polymorphism for UserMenu
note "Polymorphism:\ndisplayMenu() is declared in UserMenu\nand implemented by StudentMenu,\nCompanyRepMenu and StaffMenu.\nThe App can call displayMenu() on\nUserMenu without knowing the concrete type." as N3
UserMenu .. N3

' Business rule for Student (max 3 applications)
note "Business rule:\nA Student can have at most\n3 internship applications at any time." as N4
Student .. N4

' Business rule for CompanyRepresentative (max 5 internships)
note "Business rule:\nA CompanyRepresentative can create\nat most 5 internships." as N5
CompanyRepresentative .. N5


' =======================
' CONTROLLERS
' =======================
package "Controllers" {

  class ApplicationManager {
    - applications : List<Application>
    - withdrawalRequests : List<WithdrawalRequest>
    - applicationsCsvFile : String
    - dateFormat : SimpleDateFormat
    - lastApplicationNumericId : int

    + loadApplications(userManager : UserManager, internshipManager : InternshipManager) : void
    + saveApplications() : void
    + createApplication(student : Student, internship : Internship) : Application
    + applyForInternship(student : Student, internship : Internship) : Application
    + acceptPlacement(application : Application) : void
    + requestWithdrawal(application : Application) : WithdrawalRequest
    + addWithdrawalRequest(request : WithdrawalRequest) : void
    + getPendingWithdrawalRequests() : List<WithdrawalRequest>
    + findRequestById(id : String) : WithdrawalRequest
    + processWithdrawalRequest(request : WithdrawalRequest, approve : boolean) : void
  }

  class InternshipManager {
    - internships : List<Internship>
    - internshipsCsvFile : String
    - dateFormat : SimpleDateFormat
    - lastInternshipNumericId : int

    + loadInternships(userManager : UserManager) : void
    + saveInternships() : void
    + createInternship(title : String, desc : String, level : InternshipLevel,
                       major : String, openingDate : Date, closingDate : Date,
                       owner : CompanyRepresentative, slots : int) : Internship
    + viewAvailableInternships(student : Student) : List<Internship>
    + viewAllInternships() : List<Internship>
    + approveInternship(i : Internship) : void
    + rejectInternship(i : Internship) : void
    + viewApplicationsForInternship(i : Internship) : List<Application>
    + approveApplication(app : Application) : void
    + rejectApplication(app : Application) : void
    + toggleInternshipVisibility(i : Internship) : void
    + findInternshipById(id : String) : Internship
    + getPendingInternships() : List<Internship>
    + removeInternship(i : Internship) : void
    + generateReport(status : String, major : String, level : String) : List<Internship>
  }

  class UserManager {
    - users : List<User>
    - studentCsvFile : String
    - staffCsvFile : String
    - companyRepCsvFile : String

    + loadUsers() : void
    + saveUsers() : void
    + registerCompanyRepresentative(userId : String, password : String, name : String,
                                    companyName : String, dept : String, position : String) : boolean
    + loginResult(userId : String, password : String) : int
    + login(userId : String, password : String) : User
    + changePassword(user : User, newPassword : String) : boolean
    + getPendingRepresentatives() : List<CompanyRepresentative>
    + findRepresentativeById(id : String) : CompanyRepresentative
    + findUserById(id : String) : User
    + authorizeRepresentative(rep : CompanyRepresentative, authorize : boolean) : void
  }
}

' =======================
' MODELS
' =======================
package "Models" {

  abstract class User {
    # userID : String
    # name : String
    - password : String

    + User(userID : String, name : String, password : String)
    + getUserID() : String
    + getName() : String
    + getPassword() : String
    + login(id : String, pass : String) : boolean
    + logout() : void
    + setPassword(newPass : String) : void
  }

  class Student {
    - yearOfStudy : int
    - major : String
    - applications : List<Application>

    + Student(userID : String, name : String, password : String, year : int, major : String)
    + addApplication(app : Application) : void
    + getApplications() : List<Application>
    + acceptPlacement(app : Application) : void
    + requestWithdrawal(app : Application) : WithdrawalRequest
    + getYearOfStudy() : int
    + setYearOfStudy(year : int) : void
    + getMajor() : String
    + setMajor(major : String) : void
  }

  class CompanyRepresentative {
    - companyName : String
    - department : String
    - position : String
    - isApproved : boolean
    - createdInternships : List<Internship>

    + CompanyRepresentative(userID : String, name : String, password : String,
                            companyName : String, department : String, position : String)
    + viewApplications(i : Internship) : List<Application>
    + approveApplication(app : Application) : void
    + rejectApplication(app : Application) : void
    + toggleVisibility(i : Internship, isVisible : boolean) : void
    + getCompanyName() : String
    + getDepartment() : String
    + getPosition() : String
    + isApproved() : boolean
    + setApproved(isApproved : boolean) : void
    + getCreatedInternships() : List<Internship>
  }

  class CareerCenterStaff {
    + CareerCenterStaff(userID : String, name : String, password : String, staffDept : String)
    + authorizeCompanyRep(rep : CompanyRepresentative, isAuthorized : boolean) : void
    + approveInternship(i : Internship) : void
    + rejectInternship(i : Internship, isRejected : boolean) : void
    + approveWithdrawal(req : WithdrawalRequest, isApproved : boolean) : void
    + rejectWithdrawal(req : WithdrawalRequest, isRejected : boolean) : void
    + generateReport(filters : String) : Report
  }

  class Internship {
    - internshipID : String
    - title : String
    - description : String
    - level : InternshipLevel
    - preferedMajor : String
    - openingDate : Date
    - closingDate : Date
    - status : InternshipStatus
    - companyName : String
    - owner : CompanyRepresentative
    - slots : int
    - slotsFilled : int
    - isVisible : boolean
    - applications : List<Application>

    + getInternshipID() : String
    + setInternshipID(id : String) : void
    + getTitle() : String
    + setTitle(title : String) : void
    + getDescription() : String
    + setDescription(desc : String) : void
    + getOpeningDate() : Date
    + setOpeningDate(date : Date) : void
    + getClosingDate() : Date
    + setClosingDate(date : Date) : void
    + getCompanyName() : String
    + setCompanyName(name : String) : void
    + getSlots() : int
    + setSlots(slots : int) : void
    + getSlotsFilled() : int
    + setSlotsFilled(filled : int) : void
    + isVisible() : boolean
    + setVisible(v : boolean) : void
    + getLevel() : InternshipLevel
    + setLevel(level : InternshipLevel) : void
    + getStatus() : InternshipStatus
    + setStatus(status : InternshipStatus) : void
    + getPreferedMajor() : String
    + setPreferedMajor(major : String) : void
    + getOwner() : CompanyRepresentative
    + setOwner(owner : CompanyRepresentative) : void
    + getApplications() : List<Application>
    + addApplication(app : Application) : void
  }

  class Application {
    - applicationID : String
    - student : Student
    - internship : Internship
    - status : ApplicationStatus
    - applicationDate : Date

    + Application(id : String, student : Student, internship : Internship, status : ApplicationStatus)
    + getApplicationID() : String
    + setApplicationID(id : String) : void
    + getStudent() : Student
    + getInternship() : Internship
    + getApplicationDate() : Date
    + setApplicationDate(date : Date) : void
    + getStatus() : ApplicationStatus
    + setStatus(status : ApplicationStatus) : void
  }

  class WithdrawalRequest {
    - requestID : String
    - application : Application
    - requestDate : Date
    - status : RequestStatus

    + WithdrawalRequest(app : Application)
    + getRequestID() : String
    + getApplication() : Application
    + getStatus() : RequestStatus
    + getRequestDate() : Date
    + setStatus(status : RequestStatus) : void
  }

  class Report {
    - generatedDate : Date
    - content : String

    + Report(content : String)
    + getGeneratedDate() : Date
    + getContent() : String
    + printReport() : void
  }
}

' =======================
' ENUMS
' =======================
package "Enums" {
  enum ApplicationStatus {
    PENDING
    APPROVED
    ACCEPTED
    UNSUCCESSFUL
  }

  enum InternshipStatus {
    PENDING
    APPROVED
    REJECTED
    FILLED
  }

  enum InternshipLevel {
    BASIC
    INTERMEDIATE
    ADVANCED
  }

  enum RequestStatus {
    PENDING
    APPROVED
    REJECTED
  }
}

' =======================
' UI LAYER
' =======================
package "UI (CLI Menus)" {

  interface UserMenu {
    + displayMenu() : void
  }

  class StudentMenu {
    - student : Student
    - internshipManager : InternshipManager
    - applicationManager : ApplicationManager
  }

  class CompanyRepMenu {
    - companyRep : CompanyRepresentative
    - internshipManager : InternshipManager
  }

  class StaffMenu {
    - staff : CareerCenterStaff
    - userManager : UserManager
    - internshipManager : InternshipManager
    - applicationManager : ApplicationManager
  }
}

' =======================
' APP / ENTRY POINT
' =======================
class App {
  - internshipManager : InternshipManager
  - userManager : UserManager
  - applicationManager : ApplicationManager
  - userMenu : UserMenu
  - currentUser : User

  + main(args : String[]) : void
}
' =======================
' RELATIONSHIPS
' =======================

' --- Layout hints (hidden arrows, affect spacing only) ---
' =======================
' ENUM RELATIONSHIPS
' =======================

ApplicationStatus --> Application
InternshipStatus --> Internship
InternshipLevel --> Internship
RequestStatus --> WithdrawalRequest


' Inheritance
User <|-- Student
User <|-- CompanyRepresentative
User <|-- CareerCenterStaff

UserMenu <|.. StudentMenu
UserMenu <|.. CompanyRepMenu
UserMenu <|.. StaffMenu

' Associations / compositions
Student "1" o-- "0..*" Application : applications
Internship "1" o-- "0..*" Application : applications

Application "1" --> "1" Student
Application "1" --> "1" Internship

WithdrawalRequest "1" --> "1" Application

CompanyRepresentative "1" o-- "0..5" Internship : createdInternships â†‘
CareerCenterStaff --> Report

ApplicationManager --> Application
ApplicationManager --> WithdrawalRequest
ApplicationManager --> Student
ApplicationManager --> Internship

InternshipManager --> Internship
InternshipManager --> CompanyRepresentative
InternshipManager --> Application

UserManager --> User
UserManager --> Student
UserManager --> CompanyRepresentative
UserManager --> CareerCenterStaff

StudentMenu --> Student
StudentMenu --> InternshipManager
StudentMenu --> ApplicationManager

CompanyRepMenu --> CompanyRepresentative
CompanyRepMenu --> InternshipManager

StaffMenu --> CareerCenterStaff
StaffMenu --> UserManager
StaffMenu --> InternshipManager
StaffMenu --> ApplicationManager

App --> UserManager
App --> InternshipManager
App --> ApplicationManager
App --> UserMenu

@enduml
